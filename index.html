<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Genshin Damage Calc</title>
    <meta name="description" content="The HTML5 Herald">
    <meta name="author" content="J4RV">

    <link rel="stylesheet" href="css/styles.css?v=1.0">
    <script src="https://unpkg.com/vue@3.0.4"></script>

</head>

<body>
    <h1>Genshin Impact Damage Calculator</h1>
    <div id="app">
        <div>
            <h3>Base stats <a href="https://genshin-impact.fandom.com/wiki/Attributes#Base_Stats">❓</a></h3>
            <!--<div>
                <label for="baseHP">Base HP</label>
                <input id="baseHP" v-model.number="baseHP" type="number">
            </div>-->
            <div>
                <label for="baseATK">Base ATK</label>
                <input id="baseATK" v-model.number="baseATK" type="number">
            </div>
            <div>
                <label for="baseDEF">Base DEF</label>
                <input id="baseDEF" v-model.number="baseDEF" type="number">
            </div>
        </div>

        <br><!-- temp! -->

        <div>
            <h3>Weapon stats <a href="https://genshin-impact.fandom.com/wiki/Weapons">❓</a></h3>
            <div>
                <label for="wepATK">Weapon ATK</label>
                <input id="wepATK" v-model.number="wepATK" type="number">
            </div>
            <div>
                <label for="wepATKP">Weapon ATK%</label>
                <input id="wepATKP" v-model.number="wepATKP" type="number">
            </div>
            <div>
                <label for="wepDEFP">Weapon DEF%</label>
                <input id="wepDEFP" v-model.number="wepDEFP" type="number">
            </div>
            <div>
                <label for="wepCRITP">Weapon Crit%</label>
                <input id="wepCRITP" v-model.number="wepCRITP" type="number">
            </div>
            <div>
                <label for="wepCDMGP">Weapon Crit DMG%</label>
                <input id="wepCDMGP" v-model.number="wepCDMGP" type="number">
            </div>
            <div>
                <label for="wepPassMult">Passive Multiplier</label>
                <input id="wepPassMult" v-model.number="wepPassMult" type="number">
            </div>
        </div>

        <br><!-- temp! -->

        <div>
            <h3>Artifact stats <a href="https://genshin-impact.fandom.com/wiki/Artifacts">❓</a></h3>
            <div>
                <label for="artATK">Artifact ATK</label>
                <input id="artATK" v-model.number="artATK" type="number">
            </div>
            <div>
                <label for="artATKP">Artifact ATK%</label>
                <input id="artATKP" v-model.number="artATKP" type="number">
            </div>
            <div>
                <label for="artDEF">Artifact DEF</label>
                <input id="artDEF" v-model.number="artDEF" type="number">
            </div>
            <div>
                <label for="artDEFP">Artifact DEF%</label>
                <input id="artDEFP" v-model.number="artDEFP" type="number">
            </div>
            <div>
                <label for="artDmgMult">Damage Multiplier</label>
                <input id="artDmgMult" v-model.number="artDmgMult" type="number">
            </div>
            <div>
                <label for="artCRITP">Artifact Crit%</label>
                <input id="artCRITP" v-model.number="artCRITP" type="number">
            </div>
            <div>
                <label for="artCDMGP">Artifact Crit DMG%</label>
                <input id="artCDMGP" v-model.number="artCDMGP" type="number">
            </div>
        </div>

        <br><!-- temp! -->

        <div>
            <h3>Extra multipliers</h3>
            <div>
                <label for="defToAtkConv">DEF to ATK conversion (%) (Noelle's Q)</label>
                <input id="defToAtkConv" v-model.number="defToAtkConv" type="number">
            </div>
            <!-- TODO: HP -> dmg scaling (Zhongli) -->
        </div>

        <br><!-- temp! -->

        <div>
            <h3>Final stats</h3>
            <!--<div>
                <label for="finalHP">Final HP:</label>
                <span id="finalHP">{{ finalHP }}</span>
            </div>-->
            <div>
                <label for="finalATK">Final ATK:</label>
                <span id="finalATK">{{ finalATK }}</span>
            </div>
            <div>
                <label for="finalDEF">Final DEF:</label>
                <span id="finalDEF">{{ finalDEF }}</span>
            </div>
            <div>
                <label for="finalCritP">Final Crit%:</label>
                <span id="finalCritP">{{ finalCritP }}</span>
            </div>
            <div>
                <label for="finalCritDMG">Final Crit DMG%:</label>
                <span id="finalCritDMG">{{ finalCritDMG }}</span>
            </div>
            <div>
                <label for="finalAvgDMG">Final non-crit DMG (Motion Value of 1):</label>
                <span id="finalAvgDMG">{{ finalDMG }}</span>
            </div>
            <div>
                <label for="finalAvgDMG">Final crit DMG (Motion Value of 1):</label>
                <span id="finalAvgDMG">{{ finalDMG * ( 1 + finalCritDMG / 100) }}</span>
            </div>
            <div>
                <label for="finalAvgDMG">Final average DMG (Motion Value of 1):</label>
                <span id="finalAvgDMG">{{ finalDMG * finalCritAvgM }}</span>
            </div>
        </div>
    </div>

    <script>
        const app = {
            data: () => ({
                baseHP: 7000,
                baseATK: 200,
                baseDEF: 600,

                wepATK: 0,
                wepATKP: 0,
                wepDEFP: 0,
                wepCRITP: 0,
                wepCDMGP: 0,
                wepPassMult: 0,

                artATK: 0,
                artATKP: 0,
                artDEF: 0,
                artDEFP: 0,
                artDmgMult: 0,
                artCRITP: 0,
                artCDMGP: 0,

                defToAtkConv: 0,
            }),
            computed: {
                finalHP: function () { return this.baseHP },

                finalDEFM: function () { return (100 + this.wepDEFP + this.artDEFP) / 100 },
                finalDEF: function () { return this.baseDEF * this.finalDEFM + this.artDEF },

                finalBaseATK: function () { return this.wepATK + this.baseATK },
                finalATKM: function () { return (100 + this.wepATKP + this.artATKP) / 100 },
                finalATK: function () { return (this.finalBaseATK * this.finalATKM + this.finalDEF * this.defToAtkConv / 100 + this.artATK) },

                finalCritP: function () { return 5 + this.wepCRITP + this.artCRITP },
                finalCritDMG: function () { return 50 + this.wepCDMGP + this.artCDMGP },
                finalCritAvgM: function () { return 1 + this.finalCritP * this.finalCritDMG / 10000 },

                finalMult: function () { return (this.artDmgMult + this.wepPassMult) / 100 },
                finalDMG: function () { return 1 * this.finalATK * (1 + this.finalMult) },
            }
        }
        Vue.createApp(app).mount('#app')

        // state to JSON (for export-import functionality)
        // JSON.stringify(app.data())
    </script>
</body>

</html>